<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Forner铆a - Sistema de Gesti贸n{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{% url 'forneria:dashboard_admin' %}"> Forner铆a</a>
            
            {% if user.is_authenticated %}
            <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">Hola, {{ user.first_name|default:user.username }}</span>
                <a class="nav-link" href="{% url 'forneria:productos_list' %}">Productos</a>
                <a class="nav-link" href="{% url 'forneria:session_info' %}">Sesi贸n</a>
                <a class="nav-link" href="{% url 'forneria:logout' %}">Cerrar Sesi贸n</a>
            </div>
            {% endif %}
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Mensajes Flash con SweetAlert2 -->
        {% if messages %}
            {% for message in messages %}
                <script>
                    Swal.fire({
                        title: '{% if message.tags == "success" %}隆xito!{% elif message.tags == "error" %}Error{% elif message.tags == "warning" %}Advertencia{% else %}Informaci贸n{% endif %}',
                        text: '{{ message }}',
                        icon: '{% if message.tags == "success" %}success{% elif message.tags == "error" %}error{% elif message.tags == "warning" %}warning{% else %}info{% endif %}',
                        confirmButtonText: 'Entendido',
                        timer: 3000,
                        timerProgressBar: true
                    });
                </script>
            {% endfor %}
        {% endif %}

        {% block content %}
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Scripts personalizados -->
    <script>
        // Funci贸n para confirmar eliminaci贸n
        function confirmarEliminacion(url, nombre) {
            Swal.fire({
                title: '驴Est谩s seguro?',
                text: `驴Deseas eliminar "${nombre}"? Esta acci贸n no se puede deshacer.`,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'S铆, eliminar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = url;
                }
            });
        }

        // Funci贸n para mostrar informaci贸n
        function mostrarInfo(titulo, mensaje) {
            Swal.fire({
                title: titulo,
                text: mensaje,
                icon: 'info',
                confirmButtonText: 'Entendido'
            });
        }

        // Funci贸n para mostrar 茅xito
        function mostrarExito(titulo, mensaje) {
            Swal.fire({
                title: titulo,
                text: mensaje,
                icon: 'success',
                confirmButtonText: 'Entendido'
            });
        }
    </script>
</body>
</html>